ENABLE_LANGUAGE(CXX)
SET(CMAKE_CXX_STANDARD 14)

INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/src
                    ${PYBIND11_INCLUDE_DIR}
                    ${JSON_INCLUDE_DIR}
                    ${PEGTL_INCLUDE_DIR}
                    ${PYTHON_INCLUDE_DIRS})

SET(CXXFFLAGS "-fvisibility=hidden")

SET(CPP_LIBRARY_SOURCES "")
SET(PYTHON_BINDING_SOURCES py_airlaps.cc)

ADD_SUBDIRECTORY(catalog)

IF (NOT ONLY_PYTHON)
    ADD_LIBRARY(airlaps ${CPP_LIBRARY_SOURCES})
ENDIF ()

IF (BUILD_PYTHON_BINDING)
    PYBIND11_ADD_MODULE(__airlaps ${PYTHON_BINDING_SOURCES})
ENDIF ()